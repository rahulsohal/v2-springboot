package com.rahul.accounts.service.impl;import com.rahul.accounts.dto.AccountsDto;import com.rahul.accounts.dto.CardsDto;import com.rahul.accounts.dto.CustomerDetailsDto;import com.rahul.accounts.dto.LoansDto;import com.rahul.accounts.entity.Accounts;import com.rahul.accounts.entity.Customer;import com.rahul.accounts.exception.ResourceNotFoundException;import com.rahul.accounts.mapper.AccountsMapper;import com.rahul.accounts.mapper.CustomerMapper;import com.rahul.accounts.repository.AccountsRepository;import com.rahul.accounts.repository.CustomerRepository;import com.rahul.accounts.service.ICustomerService;import com.rahul.accounts.service.client.CardsFeignClient;import com.rahul.accounts.service.client.LoansFeignClient;import org.springframework.http.ResponseEntity;public class CustomerServiceImpl implements ICustomerService {    private AccountsRepository accountsRepository;    private CustomerRepository customerRepository;    private CardsFeignClient cardsFeignClient;    private LoansFeignClient loansFeignClient;    /**     * @param mobileNumber - Input Mobile Number     *  @param correlationId - Correlation ID value generated at Edge server     * @return Customer Details based on a given mobileNumber     */    @Override    public CustomerDetailsDto fetchCustomerDetails(String mobileNumber, String correlationId) {        Customer customer = customerRepository.findByMobileNumber(mobileNumber).orElseThrow(                () -> new ResourceNotFoundException("Customer", "mobileNumber", mobileNumber)        );        Accounts accounts = accountsRepository.findByCustomerId(customer.getCustomerId()).orElseThrow(                () -> new ResourceNotFoundException("Account", "customerId", customer.getCustomerId().toString())        );        CustomerDetailsDto customerDetailsDto = CustomerMapper.mapToCustomerDetailsDto(customer, new CustomerDetailsDto());        customerDetailsDto.setAccountsDto(AccountsMapper.mapToAccountsDto(accounts, new AccountsDto()));        ResponseEntity<LoansDto> loansDtoResponseEntity = loansFeignClient.fetchLoanDetails(correlationId, mobileNumber);        customerDetailsDto.setLoansDto(loansDtoResponseEntity.getBody());        ResponseEntity<CardsDto> cardsDtoResponseEntity = cardsFeignClient.fetchCardDetails(correlationId, mobileNumber);        customerDetailsDto.setCardsDto(cardsDtoResponseEntity.getBody());        return customerDetailsDto;    }}